# 什么是卷积

卷积的意义：加权叠加

物理意义：一个函数（如：单位响应）在另一个函数（如：输入信号）上的加权叠加

## 卷积的定义

我们称$(f*g)(n)为f,g$的卷积

其连续的定义为:
$$
(f*g)(n) = \int\limits_{-\infty}^{\infty}f(\tau)g(n-\tau)d\tau
$$

其离散的定义为：
$$
(f*g)(n) = \sum\limits_{\tau=-\infty}^{\infty}f(\tau)g(n-\tau)
\\
我们令x = \tau,y=n-\tau,那么x+y=n就是一根直线，如果遍历所有n的取值，就好比沿着角卷起来
$$

## 离散卷积的例子：丢骰子

两个骰子丢出去点数加起来为4的概率是多少，正是卷积的应用场景

$$
(f*g)(4) = f(1)g(3) + f(2)g(2) + f(3)g(1) = \sum _{m = 1}^3f(4-m)g(m)
$$

## 连续卷积的例子：做馒头

假设馒头的生产速度是f(t)，那么一天后生产出来的馒头总量为：

$$
\int_0^{24}f(t)dt
$$

馒头生产出来之后，就会慢慢腐败，假设腐败函数为g(t)，比如，10个馒头，24小时会腐败10*g(t)。第一个小时生产出来的馒头，一天会经历24小时的腐败，第二个小时生产出来的馒头，一天会经历23小时的腐败。一天后，馒头总共腐败了

$$
\int_0^{24}f(t)g(24-5)dt
$$
这就是连续卷积

## 图像处理

如果需要平滑一个图像的噪点，先把有噪点的原图转为一个矩阵

$$
\left[\begin{matrix}
a_{0,0} & a_{0,1} & a_{0,2} & \cdots & a_{0,n} \\
a_{1,0} & a_{1,1} & a_{1,2} & \cdots & a_{1,n} \\
a_{2,0} & a_{2,1} & a_{2,2} & \cdots & a_{2,n} \\
\cdots & \cdots & \cdots & \cdots & \cdots \\
a_{m,0} & a_{m,1}& a_{m,2}& \cdots & a_{m,n}\\
\end{matrix}\right]\\

然后用下面这个平均矩阵(实际处理应该用正泰分布矩阵)来平滑图像：
g=\left[\begin{matrix}
  \frac{1}{9} & \frac{1}{9} & \frac{1}{9} \\
  \frac{1}{9} & \frac{1}{9} & \frac{1}{9} \\
  \frac{1}{9} & \frac{1}{9} & \frac{1}{9} \\
\end{matrix} \right]
$$
实际就是把高频信号与周围的数值平均一下就能平滑处理

如要平滑$a_{1,1}$点，就在矩阵中，取出$$a_{1,1}点附近的点组成矩阵f,和g进行卷积计算后，再填回去

$$
f = \left[
  \begin{matrix}
  a_{0,0} & a_{0,1} & a_{0,2}  \\
  a_{1,0} & a_{1,1} & a_{1,2}  \\
  a_{2,0} & a_{2,1} & a_{2,2}
  \end{matrix}
\right]

\\

为了运用卷积，g虽然和f同纬度，但下标要调整为不一样

g = \left[
  \begin{matrix}
  b_{-1,-1} & b_{-1,0} & b_{-1,1}  \\
  b_{0,-1} & b_{0,0} & b_{0,1}  \\
  b_{1,-1} & b_{1,0} & b_{1,1}
  \end{matrix}
\right]
\\

c_{1,1} = a_{0,0}b_{1,1} + a_{0,1}b_{1,0} + a_{0,2}b_{1,-1} + a_{1,0}b_{0,1} + a_{1,1}b_{0,0} + a_{1,2}b_{0,-1} + a_{2,0}b_{-1,1} + a_{2,1}b_{-1,0} + a_{2,2}b_{-1,-1} \\
写成卷积公式就是：
(f*g)(1,1) = \sum_{k=0}^2\sum_{h=0}^2f(h,k)g(1-h, 1-k)
$$

卷积将是过去所有连续信号经过系统的响应之后得到的在观察那一刻的加权叠加

函数卷积的傅里叶变换是函数傅里叶变换的乘积。具体分为时域卷积定理和频域卷积定理，时域卷积定理即时域内的卷积对应频域内的乘积；频域卷积定理即频域内的卷积对应时域内的乘积，两者具有对偶关系

$$
F[f(t)*g(t)] = F(\omega)\bullet G(\omega)\\
F[f(t)\bullet g(t)] = \frac{1}{2\pi} F(\omega)*G(\omega)
$$

## 其他

### 狄拉克函数

$$
\delta(x) = \begin{cases}
+\infty, & x=0\\
0, & x\neq0
\end{cases}\\

并且满足

\int_{-\infty}^{+\infty}\delta(x)dx = 1


$$